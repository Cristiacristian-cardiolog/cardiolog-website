<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dr. med. Dan Cristian Briscan – Cardiolog</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; line-height: 1.6; }
    header { background: #c62828; color: white; text-align: center; padding: 1rem; }
    nav { margin: 1rem; text-align: center; }
    nav button { margin: 0 5px; padding: 6px 12px; border: none; border-radius: 5px; cursor: pointer; }
    main { padding: 1rem; max-width: 900px; margin: auto; }
    section { margin-bottom: 2rem; }
    footer { background: #333; color: white; text-align: center; padding: 1rem; margin-top: 2rem; }
    .sticky-cta { position: fixed; bottom: 10px; right: 10px; display: flex; gap: 10px; }
    .sticky-cta button { padding: 10px 15px; border: none; border-radius: 5px; cursor: pointer; font-size: 1rem; }
    #callBtn { background: #25D366; color: white; }
    #reserveBtn { background: #1976d2; color: white; }
  </style>
</head>
<body>
<header>
  <h1 id="title">Dr. med. Dan Cristian Briscan – Cardiolog</h1>
</header>

<nav>
  <button onclick="setLang('ro')">Română 🇷🇴</button>
  <button onclick="setLang('de')">Deutsch 🇩🇪</button>
</nav>

<main>
  <section id="intro">
    <h2>❤️ Ai grijă de inima ta!</h2>
    <p id="introText">Ofer consultații online de 30 minute cu sfaturi personalizate pentru sănătatea inimii tale.</p>
  </section>

  <section id="appointmentForm">
    <h2 id="formTitle">📅 Programează o consultație</h2>
    <form>
      <label for="date" id="dateLabel">Selectează data:</label><br>
      <input type="date" id="date" required><br><br>

      <label for="time" id="timeLabel">Selectează ora:</label><br>
      <select id="time" required>
        <option value="">-- Alege ora --</option>
      </select><br><br>

      <button type="submit" id="submitBtn">Trimite cererea</button>
    </form>
  </section>

  <section id="contact">
    <h2>📞 Contact</h2>
    <ul style="list-style:none; padding-left:0;">
      <li><a href="tel:+4915163269702">📞 +49 1516 3269702</a></li>
      <li><a href="mailto:cristian.cardiolog@yahoo.com">✉️ cristian.cardiolog@yahoo.com</a></li>
      <li><a href="https://www.instagram.com/cristian.cardiolog/" target="_blank">📷 Instagram</a></li>
      <li><a href="https://www.facebook.com/profile.php?id=61579258951146" target="_blank">📘 Facebook</a></li>
    </ul>
    <canvas id="qrcode"></canvas>
  </section>
</main>

<div class="sticky-cta">
  <button onclick="callNow()" id="callBtn">📞 Sună acum</button>
  <button onclick="reserveNow()" id="reserveBtn">💬 Rezervă acum</button>
</div>

<footer>
  &copy; 2025 Dr. med. Dan Cristian Briscan – Cardiolog | Toate drepturile rezervate
</footer>

<script src="https://cdn.jsdelivr.net/npm/qrious/dist/qrious.min.js"></script>
<script>
// === Config Google Sheet ===
const sheetId = "YOUR_SHEET_ID";  // <-- înlocuiește cu ID-ul tău real
const sheetUrl = `https://docs.google.com/spreadsheets/d/${sheetId}/pub?output=tsv`;
const dateInput = document.getElementById('date');
const timeSelect = document.getElementById('time');

async function fetchOccupiedSlots() {
  try {
    const res = await fetch(sheetUrl);
    const text = await res.text();
    const lines = text.split("\n").slice(1);
    const slots = {};
    lines.forEach(line => {
      const [date, time] = line.split("\t");
      if (!slots[date]) slots[date] = [];
      if (time) slots[date].push(time.trim());
    });
    return slots;
  } catch(e) {
    console.error("Eroare la preluarea sloturilor", e);
    return {};
  }
}

async function updateTimeOptions() {
  timeSelect.innerHTML = '<option value="">-- Alege ora --</option>';
  if (!dateInput.value) return;
  const selectedDate = dateInput.value;
  const slots = await fetchOccupiedSlots();
  let startHour = 9, endHour = 17;
  for (let h = startHour; h < endHour; h++) {
    const hourStr = `${h}:00`;
    const isOccupied = slots[selectedDate]?.includes(hourStr);
    if (!isOccupied) {
      const opt = document.createElement('option');
      opt.value = hourStr;
      opt.textContent = hourStr;
      timeSelect.appendChild(opt);
    }
  }
}
dateInput.addEventListener('change', updateTimeOptions);

// 📞 WhatsApp direct
function callNow() {
  window.open("https://wa.me/4915163269702", "_blank");
}

// 💬 Scroll la formular
function reserveNow() {
  document.getElementById("appointmentForm").scrollIntoView({ behavior: "smooth" });
}

// 🌍 Switch limbi
const translations = {
  ro: {
    introText: "Ofer consultații online de 30 minute cu sfaturi personalizate pentru sănătatea inimii tale.",
    formTitle: "📅 Programează o consultație",
    dateLabel: "Selectează data:",
    timeLabel: "Selectează ora:",
    submitBtn: "Trimite cererea",
    title: "Dr. med. Dan Cristian Briscan – Cardiolog"
  },
  de: {
    introText: "Ich biete 30-minütige Online-Konsultationen mit personalisierten Ratschlägen für Ihre Herzgesundheit an.",
    formTitle: "📅 Termin vereinbaren",
    dateLabel: "Datum auswählen:",
    timeLabel: "Uhrzeit auswählen:",
    submitBtn: "Anfrage senden",
    title: "Dr. med. Dan Cristian Briscan – Kardiologe"
  }
};
function setLang(lang) {
  document.getElementById("introText").textContent = translations[lang].introText;
  document.getElementById("formTitle").textContent = translations[lang].formTitle;
  document.getElementById("dateLabel").textContent = translations[lang].dateLabel;
  document.getElementById("timeLabel").textContent = translations[lang].timeLabel;
  document.getElementById("submitBtn").textContent = translations[lang].submitBtn;
  document.getElementById("title").textContent = translations[lang].title;
}

// 🔲 QR Code contact
new QRious({
  element: document.getElementById('qrcode'),
  value: "TEL:+4915163269702\nEMAIL:cristian.cardiolog@yahoo.com\nInstagram:https://www.instagram.com/cristian.cardiolog/\nFacebook:https://www.facebook.com/profile.php?id=61579258951146",
  size: 180
});
</script>
</body>
</html>
